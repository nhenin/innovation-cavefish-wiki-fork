## ðŸ§­ Summary

Work advanced the commitment-to-challenge path: session state was reshaped around CommitmentDemonstrated, challenge computation and witness generation were added, and session persistence helpers landed.
CI stability improved with Hydra fixes and environment setup updates, alongside repository input reorganization.
ZK circuit scalability surfaced as the main risk: Blake2b VarLen hashing drove multi-minute compile times and very large circuits, prompting benchmarking, tx-size analysis, and exploration of multi-circuit sizing plus alternatives (observer script path, ZKVMs, non-monolithic hashing).
The team aligned on documenting performance constraints and finishing the baseline prototype before deciding on next steps.

## ðŸŽ¯ Goals

### [SRL 2 â†’ 3 | Single Service Provider Prototype](https://github.com/input-output-hk/innovation-cavefish/milestone/1)

- Extend the commitment flow with challenge computation and witness generation.
- Stabilize session persistence and flow-section updates.
- Improve CI reliability (Hydra) and clean up setup inputs.
- Remove non-source binary artifacts from version control where possible.
- Benchmark ZK circuit performance across realistic transaction sizes and define go/no-go thresholds.
- Evaluate alternative paths (observer script/CIP, multi-circuit sizing, ZKVMs) alongside the baseline prototype.

## ðŸ›  Implementation Progress

### Backend & Prototype Logic
- Reshaped Session with CommitmentDemonstrated and reverted WBPS prototype params where needed.
- Added challenge computation and witness generation.
- Added session persistence helpers and merged flow-section updates.

### ZK Circuit Performance & Research
- Benchmarked Blake2b VarLen hashing costs and confirmed poor scaling; 16 KiB tx bodies led to >10-minute compilation and ~2 GB circuits in the current approach.
- Collected tx-body size distribution from BlockFrost sampling (~10k txs) to guide circuit sizing: min 84 B, max 15036 B, mean 785 B, median 494 B, p75 906 B, p90 1326 B, p95 2512 B, p99 5983 B.
- Compared prover times across Circom-SnarkJS and Midnight-ZK, noting OOM at higher percentiles in Circom and higher base costs in Midnight (see table).
- Discussed scaling options: multiple circuit sizes keyed to tx length and a go/no-go proof-time threshold of 15-25 s for the current approach.
- Evaluated alternatives and mitigations: observer script/CIP path (txId-in-circuit hashing remains the bottleneck without ledger changes), a lower-security trustless client-view option, partial externalization or boundary-proof hashing, and exploring ZKVMs or non-monolithic Blake2b.


## ðŸ“„ Deliverables

### Commits (January 1â€“15, 2026)

* [481506f](https://github.com/input-output-hk/innovation-cavefish/commit/481506f40d6fb6ce1cd9af720e2988aa71afb0bc) â€” Revert "remove executable from github" *(Nicolas Henin)*
* [e2987e8](https://github.com/input-output-hk/innovation-cavefish/commit/e2987e8a065dfccab1fd41a0d7a912ff15e63afd) â€” Revert "Remove binary ARM files" *(Nicolas Henin)*
* [d5603b8](https://github.com/input-output-hk/innovation-cavefish/commit/d5603b88eb5fbe5787260a2bab9041d65d142821) â€” wip *(Nicolas Henin)*
* [985610a](https://github.com/input-output-hk/innovation-cavefish/commit/985610a353d66c974dc2a410f923c7b43ee2f99d) â€” added Generate Witness *(Nicolas Henin)*
* [601f280](https://github.com/input-output-hk/innovation-cavefish/commit/601f28091efb27db41406e7de3d35c8dc915b309) â€” Merge pull request #102 from input-output-hk/remove/ARM-aarch64-executable *(Nicolas Henin)*
* [77ac1d6](https://github.com/input-output-hk/innovation-cavefish/commit/77ac1d683c0f731a238d096ff6248c1546c94f83) â€” Remove binary ARM files *(kayvank)*
* [401f6d7](https://github.com/input-output-hk/innovation-cavefish/commit/401f6d7e50fe2e64dc6595af82981d2cacb0e04b) â€” remove executable from github *(kayvank)*
* [026da4d](https://github.com/input-output-hk/innovation-cavefish/commit/026da4d177dc3e67b9763cfab350fda927b41a8d) â€” Merge pull request #99 from input-output-hk/origin/nhenin/flow-section4 *(Nicolas Henin)*
* [ec0bcb1](https://github.com/input-output-hk/innovation-cavefish/commit/ec0bcb1779553954ff3069faa66287223a9a0c62) â€” [wbps_prototype]reverted back to initial params *(Nicolas Henin)*
* [858ac49](https://github.com/input-output-hk/innovation-cavefish/commit/858ac49c82faa4d4b0e2161fb281c23431a87e0a) â€” reshaped Session with CommitmentDemonstrated *(Nicolas Henin)*
* [2928e10](https://github.com/input-output-hk/innovation-cavefish/commit/2928e104c7c7a6768507c4f419c76f9cd97085f4) â€” added Challenge Computation *(Nicolas Henin)*
* [426c695](https://github.com/input-output-hk/innovation-cavefish/commit/426c6958a85eafa7e865b9d0a2a16dce16ee1d56) â€” added env set for CI *(Nicolas Henin)*
* [62131c9](https://github.com/input-output-hk/innovation-cavefish/commit/62131c902b6f3637ea1609f341414d560efcf3b3) â€” fix Hydra CI *(Nicolas Henin)*
* [b27b614](https://github.com/input-output-hk/innovation-cavefish/commit/b27b61448a82459eb05c094e062d67074185c292) â€” move files input to setup folder *(Nicolas Henin)*
* [e51ef10](https://github.com/input-output-hk/innovation-cavefish/commit/e51ef10de0a83a73a48dc12e8a28f0699d07d825) â€” save created session + fetch sessions functions *(Nicolas Henin)*
