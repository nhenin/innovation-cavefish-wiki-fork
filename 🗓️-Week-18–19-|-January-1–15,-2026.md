## ðŸ§­ Summary

The prototype is progressing well and advanced the commitment-to-challenge path:
- session state was reshaped around CommitmentDemonstrated,
- challenge computation and witness generation were added,
- and commitment/challenge/proof rebuilding plus session tracing were improved.

Repository structure evolved toward an event-based file structure where artifacts are collected and stored in folders progressively.

ZK circuit scalability surfaced as the main risk:
- Blake2b VarLen hashing drove multi-minute compile times and very large circuits,
- prompting benchmarking,
- tx-size analysis,
- exploration of multi-circuit sizing plus alternatives (observer script path, ZKVMs, non-monolithic hashing).

The team aligned on documenting performance constraints and finishing the baseline prototype before deciding on next steps.

## ðŸŽ¯ Goals

### [SRL 2 â†’ 3 | Single Service Provider Prototype](https://github.com/input-output-hk/innovation-cavefish/milestone/1)

- Extend the commitment flow with challenge computation and witness generation.
- Stabilize session persistence and flow-section updates.
- Improve CI reliability (Hydra) and clean up setup inputs.
- Remove non-source binary artifacts from version control where possible.
- Benchmark ZK circuit performance across realistic transaction sizes and define go/no-go thresholds.
- Evaluate alternative paths (observer script/CIP, multi-circuit sizing, ZKVMs) alongside the baseline prototype.

## ðŸ›  Implementation Progress

### Backend & Prototype Logic
- Reshaped Session with CommitmentDemonstrated, reverted WBPS prototype params where needed, and fixed Commitment/Challenge/Proof rebuilding.
- Added challenge computation and witness generation, plus session persistence helpers and flow-section updates.
- Reworked commitment generation to add session traces and introduced Demonstration/Proving folders.

### ZK Circuit Performance & Research
- Benchmarked Blake2b VarLen hashing costs and confirmed poor scaling; 16 KiB tx bodies led to >10-minute compilation and ~2 GB circuits in the current approach.
- Collected tx-body size distribution from BlockFrost sampling (~10k txs) to guide circuit sizing: min 84 B, max 15036 B, mean 785 B, median 494 B, p75 906 B, p90 1326 B, p95 2512 B, p99 5983 B.
- Compared prover times across Circom-SnarkJS and Midnight-ZK, noting OOM at higher percentiles in Circom and higher base costs in Midnight (see table).
- Discussed scaling options: multiple circuit sizes keyed to tx length and a go/no-go proof-time threshold of 15-25 s for the current approach.
- Evaluated alternatives and mitigations: observer script/CIP path (txId-in-circuit hashing remains the bottleneck without ledger changes), a lower-security trustless client-view option, partial externalization or boundary-proof hashing, and exploring ZKVMs or non-monolithic Blake2b.
- Aligned circuit parameters with relation.circom.


## ðŸ“„ Deliverables

### Commits (January 1â€“15, 2026)

* [ec9f38b](https://github.com/input-output-hk/innovation-cavefish/commit/ec9f38b2bc2b99e490a0d78886f04157974c8df9) â€” fixed rebuilding the Commitment,the Challenge & Proof *(Nicolas Henin)*
* [d94e4c5](https://github.com/input-output-hk/innovation-cavefish/commit/d94e4c555ffb0c661b29c6ed178972275cfb3e4e) â€” reworked commitment genration logic to add traces in the session folder *(Nicolas Henin)*
* [822ea78](https://github.com/input-output-hk/innovation-cavefish/commit/822ea788b09b1f4e8d8196d2662dcc9ea7f4578e) â€” aligning Circuits Parameters with relation.circom *(Nicolas Henin)*
* [d7def29](https://github.com/input-output-hk/innovation-cavefish/commit/d7def29443ce42dfff40b7f17322477551967744) â€” Updated Flake *(Nicolas Henin)*
* [b3fa4d7](https://github.com/input-output-hk/innovation-cavefish/commit/b3fa4d795f27ee3d9ccad77de5ec1df3b465ba35) â€” [wbps] introduced Demonstration and Proving Folder *(Nicolas Henin)*
* [15866b3](https://github.com/input-output-hk/innovation-cavefish/commit/15866b31394aa4ee91b90d1896780870eadb147d) â€” deleted cavefish-client project and remaining prototype modules *(Nicolas Henin)*
* [288c99a](https://github.com/input-output-hk/innovation-cavefish/commit/288c99a8f6a0d8ad97f12a2a230de672a8e0fb2d) â€” Revert "remove executable from github" *(Nicolas Henin)*
* [8c5d204](https://github.com/input-output-hk/innovation-cavefish/commit/8c5d2046960c066872207850c5becff8aee47052) â€” Revert "Remove binary ARM files" *(Nicolas Henin)*
* [024a53c](https://github.com/input-output-hk/innovation-cavefish/commit/024a53ceb106118e0e8b8b3902f6564aac81e66e) â€” Merge pull request #101 from input-output-hk/remove/InternalIntent *(Nicolas Henin)*
* [6b3e6d9](https://github.com/input-output-hk/innovation-cavefish/commit/6b3e6d9dea1f61ad4283ddd405a3aef56aa1c41e) â€” Add threaded ghc falg *(kayvank)*
* [d2624c2](https://github.com/input-output-hk/innovation-cavefish/commit/d2624c2cee7d0fdd79a832e6e81e86c44aa61dd7) â€” Update cabal index-state *(kayvank)*
* [4044eb9](https://github.com/input-output-hk/innovation-cavefish/commit/4044eb9d3b1013a1aa8d956e182c3c37582760f2) â€” Update caba index-state *(kayvank)*
* [8111803](https://github.com/input-output-hk/innovation-cavefish/commit/8111803569aef3e4fb82a7b5f9264250c6a0f3c2) â€” Merge pull request #103 from input-output-hk/origin/nhenin/flow-section4 *(Nicolas Henin)*
* [985610a](https://github.com/input-output-hk/innovation-cavefish/commit/985610a353d66c974dc2a410f923c7b43ee2f99d) â€” added Generate Witness *(Nicolas Henin)*
* [601f280](https://github.com/input-output-hk/innovation-cavefish/commit/601f28091efb27db41406e7de3d35c8dc915b309) â€” Merge pull request #102 from input-output-hk/remove/ARM-aarch64-executable *(Nicolas Henin)*
* [77ac1d6](https://github.com/input-output-hk/innovation-cavefish/commit/77ac1d683c0f731a238d096ff6248c1546c94f83) â€” Remove binary ARM files *(kayvank)*
* [401f6d7](https://github.com/input-output-hk/innovation-cavefish/commit/401f6d7e50fe2e64dc6595af82981d2cacb0e04b) â€” remove executable from github *(kayvank)*
* [026da4d](https://github.com/input-output-hk/innovation-cavefish/commit/026da4d177dc3e67b9763cfab350fda927b41a8d) â€” Merge pull request #99 from input-output-hk/origin/nhenin/flow-section4 *(Nicolas Henin)*
* [ec0bcb1](https://github.com/input-output-hk/innovation-cavefish/commit/ec0bcb1779553954ff3069faa66287223a9a0c62) â€” [wbps_prototype]reverted back to initial params *(Nicolas Henin)*
* [858ac49](https://github.com/input-output-hk/innovation-cavefish/commit/858ac49c82faa4d4b0e2161fb281c23431a87e0a) â€” reshaped Session with CommitmentDemonstrated *(Nicolas Henin)*
* [2928e10](https://github.com/input-output-hk/innovation-cavefish/commit/2928e104c7c7a6768507c4f419c76f9cd97085f4) â€” added Challenge Computation *(Nicolas Henin)*
* [426c695](https://github.com/input-output-hk/innovation-cavefish/commit/426c6958a85eafa7e865b9d0a2a16dce16ee1d56) â€” added env set for CI *(Nicolas Henin)*
* [62131c9](https://github.com/input-output-hk/innovation-cavefish/commit/62131c902b6f3637ea1609f341414d560efcf3b3) â€” fix Hydra CI *(Nicolas Henin)*
* [b27b614](https://github.com/input-output-hk/innovation-cavefish/commit/b27b61448a82459eb05c094e062d67074185c292) â€” move files input to setup folder *(Nicolas Henin)*
* [e51ef10](https://github.com/input-output-hk/innovation-cavefish/commit/e51ef10de0a83a73a48dc12e8a28f0699d07d825) â€” save created session + fetch sessions functions *(Nicolas Henin)*

### Issues (January 1â€“15, 2026)

#### Closed
* [#61](https://github.com/input-output-hk/cavefish/issues/61) â€” ðŸŽ£ 4-5. User Requests the Proof that the SPâ€™s Commitment Is Valid

#### Updated
* [#61](https://github.com/input-output-hk/cavefish/issues/61) â€” ðŸŽ£ 4-5. User Requests the Proof that the SPâ€™s Commitment Is Valid
* [#48](https://github.com/input-output-hk/cavefish/issues/48) â€”  CI: Add Nix dev-shell job (`nix develop`) on x86_64 and aarch64
* [#86](https://github.com/input-output-hk/cavefish/issues/86) â€” hydra CI

#### In Progress
* [#48](https://github.com/input-output-hk/cavefish/issues/48) â€”  CI: Add Nix dev-shell job (`nix develop`) on x86_64 and aarch64
* [#86](https://github.com/input-output-hk/cavefish/issues/86) â€” hydra CI
